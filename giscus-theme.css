/*!
 * Custom Giscus Theme for MikeRoberto.com
 * Based on GitHub's Cobalt (dark) and Light Protanopia (light) themes
 * Modified to complement the forest green site theme
 */

/* ============================================
   LIGHT MODE - Based on light_protanopia
   ============================================ */
main {
  /* Syntax highlighting */
  --color-prettylights-syntax-comment: #6e7781;
  --color-prettylights-syntax-constant: #0550ae;
  --color-prettylights-syntax-entity: #8250df;
  --color-prettylights-syntax-storage-modifier-import: #24292f;
  --color-prettylights-syntax-entity-tag: #0550ae;
  --color-prettylights-syntax-keyword: #b35900;
  --color-prettylights-syntax-string: #0a3069;
  --color-prettylights-syntax-variable: #8a4600;
  --color-prettylights-syntax-brackethighlighter-unmatched: #6f3800;
  --color-prettylights-syntax-invalid-illegal-text: #f6f8fa;
  --color-prettylights-syntax-invalid-illegal-bg: #6f3800;
  --color-prettylights-syntax-carriage-return-text: #f6f8fa;
  --color-prettylights-syntax-carriage-return-bg: #b35900;
  --color-prettylights-syntax-string-regexp: #0550ae;
  --color-prettylights-syntax-markup-list: #3b2300;
  --color-prettylights-syntax-markup-heading: #0550ae;
  --color-prettylights-syntax-markup-italic: #24292f;
  --color-prettylights-syntax-markup-bold: #24292f;
  --color-prettylights-syntax-markup-deleted-text: #6f3800;
  --color-prettylights-syntax-markup-deleted-bg: #fff5e8;
  --color-prettylights-syntax-markup-inserted-text: #0550ae;
  --color-prettylights-syntax-markup-inserted-bg: #ddf4ff;
  --color-prettylights-syntax-markup-changed-text: #8a4600;
  --color-prettylights-syntax-markup-changed-bg: #ffddb0;
  --color-prettylights-syntax-markup-ignored-text: #eaeef2;
  --color-prettylights-syntax-markup-ignored-bg: #0550ae;
  --color-prettylights-syntax-meta-diff-range: #8250df;
  --color-prettylights-syntax-brackethighlighter-angle: #57606a;
  --color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f;
  --color-prettylights-syntax-constant-other-reference-link: #0a3069;

  /* Button colors */
  --color-btn-text: #24292f;
  --color-btn-bg: #f6f8fa;
  --color-btn-border: #1b1f2426;
  --color-btn-shadow: 0 1px 0 #1b1f240a;
  --color-btn-inset-shadow: inset 0 1px 0 #ffffff40;
  --color-btn-hover-bg: #f3f4f6;
  --color-btn-hover-border: #1b1f2426;
  --color-btn-active-bg: #ebecf0;
  --color-btn-active-border: #1b1f2426;
  --color-btn-selected-bg: #eeeff2;

  /* Primary button - Forest green for consistency */
  --color-btn-primary-text: #fff;
  --color-btn-primary-bg: #059669;
  --color-btn-primary-border: #1b1f2426;
  --color-btn-primary-shadow: 0 1px 0 #1b1f241a;
  --color-btn-primary-inset-shadow: inset 0 1px 0 #ffffff08;
  --color-btn-primary-hover-bg: #047857;
  --color-btn-primary-hover-border: #1b1f2426;
  --color-btn-primary-selected-bg: #065f46;
  --color-btn-primary-selected-shadow: inset 0 1px 0 #00215533;
  --color-btn-primary-disabled-text: #fffc;
  --color-btn-primary-disabled-bg: #86efac;
  --color-btn-primary-disabled-border: #1b1f2426;

  /* Action list */
  --color-action-list-item-default-hover-bg: #d0d7de52;

  /* Segmented control */
  --color-segmented-control-bg: #eaeef2;
  --color-segmented-control-button-bg: #fff;
  --color-segmented-control-button-selected-border: #8c959f;

  /* Foreground colors */
  --color-fg-default: #24292f;
  --color-fg-muted: #57606a;
  --color-fg-subtle: #6e7781;

  /* Canvas/background colors - slightly different from page white */
  --color-canvas-default: #ffffff;
  --color-canvas-overlay: #ffffff;
  --color-canvas-inset: #f6f8fa;
  --color-canvas-subtle: #f6f8fa;

  /* Border colors */
  --color-border-default: #d0d7de;
  --color-border-muted: #d8dee4;

  /* Accent colors */
  --color-neutral-muted: #afb8c133;
  --color-accent-fg: #0969da;
  --color-accent-emphasis: #0969da;
  --color-accent-muted: #54aeff66;
  --color-accent-subtle: #ddf4ff;

  /* Status colors */
  --color-success-fg: #0969da;
  --color-attention-fg: #9a6700;
  --color-attention-muted: #d4a72c66;
  --color-attention-subtle: #fff8c5;
  --color-danger-fg: #b35900;
  --color-danger-muted: #f7993966;
  --color-danger-subtle: #fff5e8;

  /* Shadows */
  --color-primer-shadow-inset: inset 0 1px 0 #d0d7de33;

  /* Scale colors */
  --color-scale-gray-1: #eaeef2;
  --color-scale-blue-1: #b6e3ff;

  /* Social reactions */
  --color-social-reaction-bg-hover: var(--color-scale-gray-1);
  --color-social-reaction-bg-reacted-hover: var(--color-scale-blue-1);
}

/* Light mode loader images */
main .pagination-loader-container {
  background-image: url(https://github.com/images/modules/pulls/progressive-disclosure-line.svg);
}

main .gsc-loading-image {
  background-image: url(https://github.githubassets.com/images/mona-loading-default.gif);
}

/* ============================================
   DARK MODE - Based on Cobalt
   ============================================ */
@media (prefers-color-scheme: dark) {
  main {
    /* Syntax highlighting */
    --color-prettylights-syntax-comment: #768390;
    --color-prettylights-syntax-constant: #6cb6ff;
    --color-prettylights-syntax-entity: #dcbdfb;
    --color-prettylights-syntax-storage-modifier-import: #adbac7;
    --color-prettylights-syntax-entity-tag: #8ddb8c;
    --color-prettylights-syntax-keyword: #f47067;
    --color-prettylights-syntax-string: #96d0ff;
    --color-prettylights-syntax-variable: #f69d50;
    --color-prettylights-syntax-brackethighlighter-unmatched: #e5534b;
    --color-prettylights-syntax-invalid-illegal-text: #cdd9e5;
    --color-prettylights-syntax-invalid-illegal-bg: #922323;
    --color-prettylights-syntax-carriage-return-text: #cdd9e5;
    --color-prettylights-syntax-carriage-return-bg: #ad2e2c;
    --color-prettylights-syntax-string-regexp: #8ddb8c;
    --color-prettylights-syntax-markup-list: #eac55f;
    --color-prettylights-syntax-markup-heading: #316dca;
    --color-prettylights-syntax-markup-italic: #adbac7;
    --color-prettylights-syntax-markup-bold: #adbac7;
    --color-prettylights-syntax-markup-deleted-text: #ffd8d3;
    --color-prettylights-syntax-markup-deleted-bg: #78191b;
    --color-prettylights-syntax-markup-inserted-text: #b4f1b4;
    --color-prettylights-syntax-markup-inserted-bg: #1b4721;
    --color-prettylights-syntax-markup-changed-text: #ffddb0;
    --color-prettylights-syntax-markup-changed-bg: #682d0f;
    --color-prettylights-syntax-markup-ignored-text: #adbac7;
    --color-prettylights-syntax-markup-ignored-bg: #255ab2;
    --color-prettylights-syntax-meta-diff-range: #dcbdfb;
    --color-prettylights-syntax-brackethighlighter-angle: #768390;
    --color-prettylights-syntax-sublimelinter-gutter-mark: #545d68;
    --color-prettylights-syntax-constant-other-reference-link: #96d0ff;

    /* Action list */
    --color-action-list-item-default-hover-bg: #909dab1f;

    /* Segmented control */
    --color-segmented-control-bg: #636e7b1a;
    --color-segmented-control-button-bg: #22272e;
    --color-segmented-control-button-selected-border: #636e7b;

    /* Button colors */
    --color-btn-text: #adbac7;
    --color-btn-bg: #00182d;
    --color-btn-border: #cdd9e51a;
    --color-btn-shadow: 0 0 #0000;
    --color-btn-inset-shadow: 0 0 #0000;
    --color-btn-hover-bg: #043662;
    --color-btn-hover-border: #768390;
    --color-btn-active-bg: #3d444d;
    --color-btn-selected-bg: #002241;
    --color-btn-active-border: #0f1d2e;

    /* Primary button - Forest green adjusted for dark */
    --color-btn-primary-text: #fff;
    --color-btn-primary-bg: #10b981;
    --color-btn-primary-border: #cdd9e51a;
    --color-btn-primary-shadow: #00182d;
    --color-btn-primary-inset-shadow: 0 0 #0000;
    --color-btn-primary-hover-bg: #059669;
    --color-btn-primary-hover-border: #cdd9e51a;
    --color-btn-primary-selected-bg: #047857;
    --color-btn-primary-selected-shadow: 0 0 #0000;
    --color-btn-primary-disabled-text: #cdd9e580;
    --color-btn-primary-disabled-bg: #065f46;
    --color-btn-primary-disabled-border: #cdd9e51a;

    /* Foreground colors */
    --color-fg-default: #adbac7;
    --color-fg-muted: #768390;
    --color-fg-subtle: #545d68;

    /* Canvas/background colors - Cobalt blue, distinct from page */
    --color-canvas-default: #002241;
    --color-canvas-overlay: #161b22;
    --color-canvas-inset: #00182d;
    --color-canvas-subtle: #043662;

    /* Border colors */
    --color-border-default: #444c56;
    --color-border-muted: #373e47;

    /* Accent colors */
    --color-neutral-muted: #636e7b66;
    --color-accent-fg: #539bf5;
    --color-accent-emphasis: #316dca;
    --color-accent-muted: #4184e466;
    --color-accent-subtle: #388bfd26;

    /* Status colors */
    --color-success-fg: #9c1212;
    --color-attention-fg: #c69026;
    --color-attention-muted: #ae7c1466;
    --color-attention-subtle: #ae7c1426;
    --color-danger-fg: #e5534b;
    --color-danger-muted: #e5534b66;
    --color-danger-subtle: #e5534b26;

    /* Shadows */
    --color-primer-shadow-inset: 0 0 #0000;

    /* Scale colors */
    --color-scale-gray-7: #002241;
    --color-scale-blue-8: #00182d;

    /* Social reactions */
    --color-social-reaction-bg-hover: var(--color-scale-gray-7);
    --color-social-reaction-bg-reacted-hover: var(--color-scale-blue-8);
  }

  /* Dark mode background for homepage embed */
  .gsc-homepage-bg {
    background-color: #00182d;
  }

  /* Dark mode loader images */
  main .pagination-loader-container {
    background-image: url(https://github.com/images/modules/pulls/progressive-disclosure-line-dark.svg);
  }

  main .gsc-loading-image {
    background-image: url(https://github.githubassets.com/images/mona-loading-dimmed.gif);
  }
}

/* ============================================
   CUSTOM LAYOUT & STYLING
   ============================================ */

/* Hide reaction counts (cleaner look) */
.gsc-reactions-count {
  display: none;
}

/* Reverse timeline (newest first) */
.gsc-timeline {
  flex-direction: column-reverse;
}

/* Header spacing */
.gsc-header {
  padding-bottom: 1rem;
}

/* Comment box ordering */
.gsc-comments > .gsc-header {
  order: 1;
}

.gsc-comments > .gsc-comment-box {
  margin-bottom: 1rem;
  order: 2;
}

.gsc-comments > .gsc-timeline {
  order: 3;
}

/* Homepage background for embedded view */
.gsc-homepage-bg {
  background-color: transparent;
}

/* Fix iframe width overflow issue */
.giscus, 
.giscus-frame {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Improve comment box styling */
.gsc-comment-box-main {
  border-radius: 0.375rem;
}

/* Better spacing for reactions */
.gsc-reactions {
  gap: 0.5rem;
}

/* Smoother transitions */
.gsc-comment,
.gsc-reply {
  transition: background-color 0.2s ease;
}

/* Ensure proper text contrast */
.gsc-comment-author,
.gsc-comment-content {
  color: var(--color-fg-default);
}

/* Link styling */
.gsc-comment-content a {
  color: var(--color-accent-fg);
  text-decoration: underline;
}

.gsc-comment-content a:hover {
  color: var(--color-accent-emphasis);
}
